---
layout: post
status: publish
published: true
title: 罪恶的代码-续3
author:
  display_name: 小飞熊
  login: fbbear
  email: fbbear@sina.com
  url: 'https://lfbear.com'
author_login: fbbear
author_email: fbbear@sina.com
author_url: 'https://lfbear.com'
wordpress_id: 277
wordpress_url: 'https://lfbear.com/?p=277'
date: '2009-03-03 16:51:00 +0800'
date_gmt: '2009-03-03 08:51:00 +0800'
categories:
  - 程序人生
tags:
  - php
  - 外挂
  - 开心农场
comments:
  - id: 10
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-03-04 10:38:59 +0800'
    date_gmt: '2009-03-04 02:38:59 +0800'
    content: >-
      忘记说了，怀疑使用持久模式时间过长会导致端口滥用的情况，建议大家如果感觉持久模式使用时对tcp的应用连接造成了影响，可以关掉程序，等待3-5分钟再次开启。仔细研究了一下，php中的curl貌似没有端口复用的功能，如果大家有好的解决办法欢迎及时交流哦~
  - id: 13
    author: fancy
    author_email: 5217wyx@gmail.com
    author_url: ''
    date: '2009-03-07 15:29:57 +0800'
    date_gmt: '2009-03-07 07:29:57 +0800'
    content: 呵呵，最近我也在研究校内的农场，无意中看到你这篇日志，觉得收获很大
  - id: 14
    author: kk
    author_email: 46904741@qq.com
    author_url: ''
    date: '2009-03-12 10:42:52 +0800'
    date_gmt: '2009-03-12 02:42:52 +0800'
    content: "希望加一个代理功能咯\r\n我公司是IE代理上网的\r\n用不了你的\r\n开心农场辅助\r\n呵呵 \r\n\r\n谢谢希望中。。。。"
  - id: 15
    author: delphicoder@126.com
    author_email: delphicoder@126.com
    author_url: ''
    date: '2009-03-12 13:36:07 +0800'
    date_gmt: '2009-03-12 05:36:07 +0800'
    content: 多谢小飞熊的代码，如何用于UCenter Home里面的家园呢，留下email，能否跟您学习一下？另外购买时没有检查购买结果以及财富？
  - id: 16
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-03-17 14:52:56 +0800'
    date_gmt: '2009-03-17 06:52:56 +0800'
    content: "RE:kk\r\n嘿嘿 没考虑到使用代理的用户呢~ 有空一定增加代理的功能。"
  - id: 17
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-03-17 14:55:48 +0800'
    date_gmt: '2009-03-17 06:55:48 +0800'
    content: "RE:delphicoder@126.com\r\n恩 多谢指正 购买种子的时候的确没有检查金钱是否足够的问题 因为最近开心农场的服务器相响应速度的确有点问题 所以会产生很多失败的情况 当时都没有检查 有空一定和kk的需求一并满足 多谢 如果想用于UCenter Home里面的家园首先要研究下作弊的原理 因为熊熊没玩过那个 这里还没办法马上告诉您解决的方法 不好意思哈"
  - id: 18
    author: wangbo
    author_email: be@sina.com
    author_url: ''
    date: '2009-03-17 16:34:54 +0800'
    date_gmt: '2009-03-17 08:34:54 +0800'
    content: "您这个软件做得太好了，非常高兴，一点建议：\r\n能不能加一个功能，能够显示偷到了什么果实，最好能够在最后的总结中列出本次偷到了几个什么果实等的内容！"
  - id: 19
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-03-20 14:09:50 +0800'
    date_gmt: '2009-03-20 06:09:50 +0800'
    content: 目前程序已更新至0.5版本 基本满足了kk，delphicoder@126.com 和 wangbo 提出的意见和建议~
  - id: 20
    author: wicked
    author_email: wicked7280@163.com
    author_url: ''
    date: '2009-03-20 14:55:16 +0800'
    date_gmt: '2009-03-20 06:55:16 +0800'
    content: >-
      很高兴看到这个软件，感谢你的辛勤劳动，有几个问题，校内的ID去好友的页面看地址栏就能看的哦了。用插件来说觉得有点麻烦，不过从技术程度讲，学到了知识呵呵。

      下周农场要更新了，好像有几个新作物要出现，不知道熊熊还会不会继续更新软件~谢谢啦~
  - id: 21
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-03-20 15:50:12 +0800'
    date_gmt: '2009-03-20 07:50:12 +0800'
    content: |-
      RE:wicked
      嘿嘿 非常感谢wicked的发现 我还真没注意到开心农场和校内用的是一套用户uid~
      农场要更新了吗？有空一定做更新 哈哈
  - id: 22
    author: wangbo
    author_email: be@sina.com
    author_url: ''
    date: '2009-03-20 21:37:17 +0800'
    date_gmt: '2009-03-20 13:37:17 +0800'
    content: |-
      小飞熊太伟大了，提出的建议马上就实现了！
      下周一更新，加入三种新作物，取消价格浮动，对整个UI做大调整（UI是什么？）
      加油啊，期待您的更新版本！
  - id: 23
    author: along
    author_email: sdxoo00@163.com
    author_url: ''
    date: '2009-03-21 09:43:11 +0800'
    date_gmt: '2009-03-21 01:43:11 +0800'
    content: |-
      下周一更新，
      看公告改动挺大的，
      你是否能弄个开心农民的那个？
      感觉两个差不呢
  - id: 24
    author: along
    author_email: sdxoo00@163.com
    author_url: ''
    date: '2009-03-21 09:44:22 +0800'
    date_gmt: '2009-03-21 01:44:22 +0800'
    content: 怎么成乱码了？
  - id: 25
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-03-21 11:14:38 +0800'
    date_gmt: '2009-03-21 03:14:38 +0800'
    content: |-
      RE:wangbo
      呵呵 已经好久不从校内登录开心农场了 看到更新通知了 UI其实就是界面啦 呵呵 如果取消价格浮动 那可以在程序里面加一个作物种植建议和预计收入咯
  - id: 26
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-03-21 11:20:26 +0800'
    date_gmt: '2009-03-21 03:20:26 +0800'
    content: |-
      RE:along
      哦？ 哪里成乱码了 开心农民偶没有玩过呢 你可以先试着抓抓包 研究下流程 熊熊有空的时候会研究一下 嘿嘿
  - id: 27
    author: along
    author_email: sdxoo00@163.com
    author_url: ''
    date: '2009-03-21 13:43:59 +0800'
    date_gmt: '2009-03-21 05:43:59 +0800'
    content: |-
      农场 周一改版就和 开心农民 差不多了

      对了，是不是最多只能访问50 个好友？？
  - id: 28
    author: kk
    author_email: yanshuguan@163.com
    author_url: ''
    date: '2009-03-21 16:29:04 +0800'
    date_gmt: '2009-03-21 08:29:04 +0800'
    content: |-
      小飞熊
      你太强大了。谢谢啊。提出的建议马上就实现了！
  - id: 29
    author: kk
    author_email: yanshuguan@163.com
    author_url: ''
    date: '2009-03-21 16:30:56 +0800'
    date_gmt: '2009-03-21 08:30:56 +0800'
    content: 强烈支持小飞熊做更好的软件~~！！~~！
  - id: 30
    author: wicked
    author_email: wicked7208@163.com
    author_url: ''
    date: '2009-03-21 18:46:58 +0800'
    date_gmt: '2009-03-21 10:46:58 +0800'
    content: >-
      呵呵我又来了。经过2天的使用，我想说很强大呵呵！

      不过我又有几个问题。嘿嘿

      1.有时用持久模式挂着挂着就网络忙或无法连接，然后过了几个周期后才可能会恢复正常。如果周期比如10分钟的话，那要很久才能发挥作用。但是如果关了程序，再打开的话，就正常了。不知道是什么原因，我代码懂得不多，没去细看，不知道熊熊有办法解决么。

      2.那个自动买种子和播种的功能，是怎么操作的，就是说怎么设定自动买什么种子去种。

      3.我的习惯是身上不放钱，有闲钱就买化肥。这样被咬了也不怕。但用了这个程序后，每天帮助好友的钱也比较可观，但有时攒了点零钱就都被好友的狗咬掉了。。心疼啊。所以我现在的做法是在好友列表里，把比有狗的好友排在前面，没狗的排在后面，这样一趟下来就能有收入。但持久模式的话就是个循环了，钱还会被咬掉很多。我想建议一下弄段程序，当身上的零钱大于50的话，就买化肥。不过这个和自动买种子冲突。最后，我的想法就是，让身上爱放钱的人用自动买种播种功能，不爱放钱的人用自动零钱买化肥功能。

      写的有点多，有点乱。。。下次想到什么再来。。。熊熊辛苦了
  - id: 31
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-03-21 23:51:03 +0800'
    date_gmt: '2009-03-21 15:51:03 +0800'
    content: >-
      谢谢小飞熊，程序写得总体不错哦，学了很多东西，未经小飞熊同意做了小小的修改。种什么最赚钱除上了作物的所有季度的收获时间这样才能是单位时间内赚钱最多的。无法连接到网络的时候，重新调用bat文件执行并kill掉原来的进程，否则出现一直无法连接的情况，具体为什么没搞清楚。好友列表已经抓到，不过是单独写的代码，不想每次执行都去抓好友列表，想抓的时候再抓一下。添加身上有钱时不偷喂了狗的好友或者身上有钱时自动买化肥或者白萝卜的代码防止被狗咬。添加了间隔时段运行的代码，总是挂着会被骂。现在偶尔会出错，貌似运行速度也变慢了点，没时间改了，改版之后再继续吧。密钥应该会变吧。有空再把买种子钱不够时自动买仓库果实的代码加上，貌似算法复杂才能保证身上钱为0。尊重农场作者和小飞熊，没改成浏览器端调用。具体代码我就不发布了，希望更多的程序员能从小飞熊的代码中学到更多的东西。小飞熊说的对：让程序代替人来完成累人的活儿，程序员最大的乐趣便在此。再次感谢小飞熊，至少我学到了不少东西，不再是对php一无所知了。
  - id: 32
    author: delphicoder@126.com
    author_email: delphicoder@126.com
    author_url: ''
    date: '2009-03-22 13:15:39 +0800'
    date_gmt: '2009-03-22 05:15:39 +0800'
    content: >-
      多谢小飞熊的回答，好像校内的应用跟discuz的UCenter
      Home实际上是一家公司提供的，界面几乎一模一样。有空可以去看看。地址：http://u.discuz.net/home/userapp.php?id=1021978&amp;my_suffix=Lw%3D%3D
  - id: 33
    author: delphicoder@126.com
    author_email: delphicoder@126.com
    author_url: ''
    date: '2009-03-22 13:27:10 +0800'
    date_gmt: '2009-03-22 05:27:10 +0800'
    content: |-
      购买的时候出现乱码：

      [购买种子] 种子购买失败，失败原因：浣犵殑閲戦挶涓嶅銆?[帮助好友] 没有设置好友
      列表，请先设置好友信息列表
  - id: 34
    author: wangbo
    author_email: be@sina.com
    author_url: ''
    date: '2009-03-22 21:55:42 +0800'
    date_gmt: '2009-03-22 13:55:42 +0800'
    content: 对，无法购买种子的时候就会出乱码，不过无碍大雅。
  - id: 35
    author: delphicoder@126.com
    author_email: delphicoder@126.com
    author_url: ''
    date: '2009-03-23 00:18:15 +0800'
    date_gmt: '2009-03-22 16:18:15 +0800'
    content: "请教\r\n    $data = json_decode($re,1);\r\n    if(!is_array($data))------>应用于其他站点时，这里总是出错？是不是下面的数据不规范？<code>\r\n{\"farmlandStatus\":[{\"a\":\"0\",\"b\":\"0\",\"c\":\"0\",\"d\":\"0\",\"e\":\"1\",\"f\":\"0\",\"g\":\"0\",\"h\":\"1\",\"i\":\"100\",\"j\":\"0\",\"k\":\"0\",\"l\":\"0\",\"m\":\"0\",\"n\":[],\"o\":\"0\",\"p\":[],\"q\":\"0\",\"r\":\"111111\"},{\"a\":\"0\",\"b\":\"0\",\"c\":\"0\",\"d\":\"0\",\"e\":\"1\",\"f\":\"0\",\"g\":\"0\",\"h\":\"1\",\"i\":\"100\",\"j\":\"0\",\"k\":\"0\",\"l\":\"0\",\"m\":\"0\",\"n\":[],\"o\":\"0\",\"p\":[],\"q\":\"0\",\"r\":\"111112\"},{\"a\":\"0\",\"b\":\"0\",\"c\":\"0\",\"d\":\"0\",\"e\":\"1\",\"f\":\"0\",\"g\":\"0\",\"h\":\"1\",\"i\":\"100\",\"j\":\"0\",\"k\":\"0\",\"l\":\"0\",\"m\":\"0\",\"n\":[],\"o\":\"0\",\"p\":[],\"q\":\"0\",\"r\":\"111113\"},{\"a\":\"0\",\"b\":\"0\",\"c\":\"0\",\"d\":\"0\",\"e\":\"1\",\"f\":\"0\",\"g\":\"0\",\"h\":\"1\",\"i\":\"100\",\"j\":\"0\",\"k\":\"0\",\"l\":\"0\",\"m\":\"0\",\"n\":[],\"o\":\"0\",\"p\":[],\"q\":\"0\",\"r\":\"111114\"},{\"a\":\"0\",\"b\":\"0\",\"c\":\"0\",\"d\":\"0\",\"e\":\"1\",\"f\":\"0\",\"g\":\"0\",\"h\":\"1\",\"i\":\"100\",\"j\":\"0\",\"k\":\"0\",\"l\":\"0\",\"m\":\"0\",\"n\":[],\"o\":\"0\",\"p\":[],\"q\":\"0\",\"r\":\"111115\"},{\"a\":\"0\",\"b\":\"0\",\"c\":\"0\",\"d\":\"0\",\"e\":\"1\",\"f\":\"0\",\"g\":\"0\",\"h\":\"1\",\"i\":\"100\",\"j\":\"0\",\"k\":\"0\",\"l\":\"0\",\"m\":\"0\",\"n\":[],\"o\":\"0\",\"p\":[],\"q\":\"0\",\"r\":\"111116\"}],\"items\":{\"1\":{\"itemId\":\"1\"},\"2\":{\"itemId\":\"2\"},\"4\":{\"itemId\":\"4\"},\"3\":{\"itemId\":\"3\"}},\"dog\":{\"dogId\":\"0\",\"isHungry\":\"1\"},\"tool\":[],\"exp\":\"1\",\"weather\":{\"weatherId\":\"1\",\"weatherDesc\":\"鏅村ぉ\"},\"friend\":[],\"user\":{\"uId\":\"001\",\"userName\":\"abc\",\"money\":0,\"FB\":\"0\",\"headPic\":\"http:\\/\\/uchome.manyou.com\\/avatar\\/abcd?thumb\",\"sex\":\"1\",\"welcome\":\"0\",\"exp\":\"0\"},\"serverTime\":{\"time\":\"123\"},\"a\":\"0\",\"b\":\"0\",\"c\":\"0\"}</code>另外weatherdesc这里乱码。"
  - id: 36
    author: delphicoder@126.com
    author_email: delphicoder@126.com
    author_url: ''
    date: '2009-03-23 00:49:03 +0800'
    date_gmt: '2009-03-22 16:49:03 +0800'
    content: >-
      http://www.jsonlint.com/

      上面的可以通过json的检验。但是 $data = json_decode($re1,1);这一步无法转换为数组。

      一个例子请看http://u.discuz.net/home/userapp.php?id=1021978&amp;my_suffix=Lw%3D%3D
  - id: 37
    author: delphicoder@126.com
    author_email: delphicoder@126.com
    author_url: ''
    date: '2009-03-23 00:51:23 +0800'
    date_gmt: '2009-03-22 16:51:23 +0800'
    content: re1是手误
  - id: 38
    author: tony
    author_email: tiger000@jlau.edu.cn
    author_url: ''
    date: '2009-03-23 16:33:16 +0800'
    date_gmt: '2009-03-23 08:33:16 +0800'
    content: |-
      请教小飞熊，你的md5是怎么破解的啊。现在有个新的农场
      1e5b7f7841de7e8150b5af5923ee6c7a这是加密后的字符串
      farmTime=1237794384 
      密钥我解不出来了，教教我吧。
  - id: 39
    author: kk
    author_email: yanshuguan@163.com
    author_url: ''
    date: '2009-03-24 10:24:21 +0800'
    date_gmt: '2009-03-24 02:24:21 +0800'
    content: |-
      熊熊

      现在农场更新了，现在的校内开心农场辅助器好像用不了了啊

      PS：我还是用代理，不过问了不是用代理的朋友，也是用不了


      熊熊可以解决这个问题吗？

      呵呵
  - id: 40
    author: CC
    author_email: sc847@163.com
    author_url: ''
    date: '2009-03-24 11:53:14 +0800'
    date_gmt: '2009-03-24 03:53:14 +0800'
    content: 农场更新了，代码不能用了，不知道熊熊什么时候更新
  - id: 41
    author: ousin
    author_email: ousin3412@163.com
    author_url: ''
    date: '2009-03-24 15:52:00 +0800'
    date_gmt: '2009-03-24 07:52:00 +0800'
    content: 今天农场更新了，熊熊的代码貌似被挂了，期待新版本的出现~！
  - id: 42
    author: huochai
    author_email: bupthuochai@gmail.com
    author_url: ''
    date: '2009-03-24 16:17:29 +0800'
    date_gmt: '2009-03-24 08:17:29 +0800'
    content: "为什么 我启动后他说\r\nl' - 找不到指定的模块。\r\n<code>in Unknown on line 0\r\nPHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_pdo_\r\nql.dll' - 找不到指定的模块。\r\nin Unknown on line 0\r\nPHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_pdo_\r\n.dll' - 找不到指定的模块。\r\nin Unknown on line 0\r\nPHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_pdo_\r\n8.dll' - 找不到指定的模块。\r\nin Unknown on line 0\r\nPHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_pdo_\r\nql.dll' - 找不到指定的模块。\r\nin Unknown on line 0\r\nPHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_pdo_\r\nite_external.dll' - 找不到指定的模块。\r\nin Unknown on line 0\r\nPHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_pgsq\r\nll' - 找不到指定的模块。\r\nin Unknown on line 0\r\nPHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_pspe\r\ndll' - 找不到指定的模块。\r\nin Unknown on line 0\r\nPHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_syba\r\nct.dll' - 找不到指定的模块。\r\nin Unknown on line 0\r\nannot find module (IP-MIB): At line 0 in (none)\r\nannot find module (IF-MIB): At line 0 in (none)\r\nannot find module (TCP-MIB): At line 0 in (none)\r\nannot find module (UDP-MIB): At line 0 in (none)\r\nannot find module (SNMPv2-MIB): At line 0 in (none)\r\nannot find module (SNMPv2-SMI): At line 0 in (none)\r\nannot find module (UCD-SNMP-MIB): At line 0 in (none)\r\nannot find module (UCD-DEMO-MIB): At line 0 in (none)\r\nannot find module (SNMP-TARGET-MIB): At line 0 in (none)\r\nannot find module (SNMP-VIEW-BASED-ACM-MIB): At line 0 in (none)\r\nannot find module (SNMP-COMMUNITY-MIB): At line 0 in (none)\r\nannot find module (UCD-DLMOD-MIB): At line 0 in (none)\r\nannot find module (SNMP-FRAMEWORK-MIB): At line 0 in (none)\r\nannot find module (SNMP-MPD-MIB): At line 0 in (none)\r\nannot find module (SNMP-USER-BASED-SM-MIB): At line 0 in (none)\r\nannot find module (SNMP-NOTIFICATION-MIB): At line 0 in (none)\r\nannot find module (SNMPv2-TM): At line 0 in (none)</code>这是什么意思呢"
  - id: 43
    author: huochai
    author_email: bupthuochai@gmail.com
    author_url: ''
    date: '2009-03-24 16:33:22 +0800'
    date_gmt: '2009-03-24 08:33:22 +0800'
    content: 这个 错误 是咋回事呢
  - id: 44
    author: huochai
    author_email: bupthuochai@gmail.com
    author_url: ''
    date: '2009-03-24 16:45:29 +0800'
    date_gmt: '2009-03-24 08:45:29 +0800'
    content: 可能是与我自己安装的php冲突了
  - id: 45
    author: wangbo
    author_email: bestwangbo@sian.com
    author_url: ''
    date: '2009-03-24 20:12:31 +0800'
    date_gmt: '2009-03-24 12:12:31 +0800'
    content: 更新了！登录不上了！一直显示网络忙，无法连接到网络。
  - id: 46
    author: wangbo
    author_email: bestwangbo@sian.com
    author_url: ''
    date: '2009-03-24 20:22:36 +0800'
    date_gmt: '2009-03-24 12:22:36 +0800'
    content: 怎么成乱码了？我说游戏更新了，咱的软件登录不上去了，显示网络忙，连接不上网络。
  - id: 49
    author: CC
    author_email: sc847@163.com
    author_url: ''
    date: '2009-03-27 09:00:36 +0800'
    date_gmt: '2009-03-27 01:00:36 +0800'
    content: 呃。。。。试着搞了一下，还是没搞出来。。 期待熊熊。。。
  - id: 51
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-03-27 17:22:36 +0800'
    date_gmt: '2009-03-27 09:22:36 +0800'
    content: >-
      <strong>请大家稍安勿躁，因为这个星期熊熊手里面有个比较紧急的项目，所以没来得及更新外挂，包括熊熊自己也n天没运行外挂了。不过前天偷偷的对新农场抓了下包，看了下，本次升级改动的地方很少，基本上都是换汤不换药，技术上没问题，等忙完了这阵子新的外挂就会发布，并且我同样会根据本次农场的升级写一篇教程，还是那句话，我们不单单是用外挂，最重要的是学到新的东东~</strong>
  - id: 52
    author: wangbo
    author_email: bestwangbo@sina.com
    author_url: ''
    date: '2009-03-28 00:29:47 +0800'
    date_gmt: '2009-03-27 16:29:47 +0800'
    content: 万岁！万岁！万岁！
  - id: 54
    author: huochai
    author_email: bupthuochai@gmail.com
    author_url: ''
    date: '2009-03-28 08:33:24 +0800'
    date_gmt: '2009-03-28 00:33:24 +0800'
    content: 小飞熊好样的！等俺毕业了俺去新浪找你啊！
  - id: 55
    author: ningjun
    author_email: ningjun_2004@snut.edu.cn
    author_url: ''
    date: '2009-03-28 18:05:47 +0800'
    date_gmt: '2009-03-28 10:05:47 +0800'
    content: 这个比较厉害了，希望尽快更新！也学了不少东西。
  - id: 57
    author: littlejack
    author_email: fddd@sohu.com
    author_url: ''
    date: '2009-03-30 14:47:10 +0800'
    date_gmt: '2009-03-30 06:47:10 +0800'
    content: >-
      在这里发现一个可用的外挂，今天测试成功，大家可以<a
      href="http://blog.xiaonei.com/GetEntry.do?id=373447932&amp;owner=228857313"
      rel="nofollow">去看看</a>。
  - id: 58
    author: DCS
    author_email: dingchangs@163.com
    author_url: ''
    date: '2009-03-30 19:52:32 +0800'
    date_gmt: '2009-03-30 11:52:32 +0800'
    content: 支持小熊，可以在这里学到很多东西，以前的版本没用过，代码学习中，期待小飞熊的新作，等待中。。。。
  - id: 59
    author: xiaohf
    author_email: xiaohf702@hotmail.com
    author_url: ''
    date: '2009-03-31 12:37:33 +0800'
    date_gmt: '2009-03-31 04:37:33 +0800'
    content: 等待更新，我也研究研究
  - id: 60
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-02 00:51:51 +0800'
    date_gmt: '2009-04-01 16:51:51 +0800'
    content: >-
      <strong>程序又可以用了，大家尽情享用吧，这些天的确太忙了，今晚熬夜把这个搞定。过去用过的同学请不要覆盖掉ini配置文件(myinfo &
      friends)，其他文件需要覆盖。有点困了，细节问题还没有过多的看，熊熊有空的时候会把细节问题再弄一下，大家有什么意见和建议也都提出来吧！</strong>
  - id: 61
    author: 呵呵
    author_email: x@x163.com
    author_url: 'http://x'
    date: '2009-04-02 13:29:01 +0800'
    date_gmt: '2009-04-02 05:29:01 +0800'
    content: omg 可以用了 谢谢 有时间的话麻烦给说明下这次更新的地方和上次有什么不一样呢 加油~！
  - id: 62
    author: 苏途
    author_email: 190879483@qq.com
    author_url: ''
    date: '2009-04-03 01:00:33 +0800'
    date_gmt: '2009-04-02 17:00:33 +0800'
    content: "前辈你好，很冒昧的请教一个问题。\r\n因为对这个游戏感兴趣，同学玩的也比较多，所以想看看能不能自己做出工具来。\r\n现在遇到了一个问题想请你指点一二。\r\nhttp://*/api.php?mod=user&amp;act=run&amp;flag=1&amp;farmKey=81c105b70a9b8a8f02ec935f341e454c&amp;farmTime=1238690933              \r\n在每次post时，farmKey和farmTime都是变化的，请问这个数值应该是怎么得到的呢？"
  - id: 63
    author: christmans
    author_email: christmans@163.com
    author_url: ''
    date: '2009-04-03 08:04:08 +0800'
    date_gmt: '2009-04-03 00:04:08 +0800'
    content: |-
      谢谢，又可以用了~~  
      熊兄知道化肥是怎么计算出来的吗？ 研究了好久，还是不知道怎么判断一块地有没有施过肥，只知道跟'o'有点关系。
  - id: 64
    author: kk
    author_email: yanshuguan@163.com
    author_url: ''
    date: '2009-04-03 12:06:53 +0800'
    date_gmt: '2009-04-03 04:06:53 +0800'
    content: |-
      小飞熊好样的

      谢谢你咯

      不过我在公司好像用不了哦

      知道你很忙，都忘了加个代理进去了吧，呵呵 

      希望帮我加个代理进去咯，kk在这里谢谢你啦~！

      呵呵   学到了不少东东，就是自己不会加代理
  - id: 65
    author: ousin
    author_email: ousin3412@163.com
    author_url: ''
    date: '2009-04-03 21:41:02 +0800'
    date_gmt: '2009-04-03 13:41:02 +0800'
    content: 小飞熊，貌似昨晚升级后你的代码又挂了！！！5555555555
  - id: 66
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-03 23:35:23 +0800'
    date_gmt: '2009-04-03 15:35:23 +0800'
    content: "<strong>呵呵，由俺熊熊来回答楼上(45-49楼)同学们的问题：</strong>\r\n\r\n<strong>RE 苏途：</strong>前辈称不上，偶还很年轻，嘿嘿。这个farmkey和farmtime在我着手写这个程序的时候也犯了难，然后我发现这两个值是一一对应关系的，并且farmkey为32位，我的第一感觉是farmkey为某些数值的md5，但是没发现是什么。偶然地，我对开心农场的flash进行了反编译，然后看到as代码中对farmtime+inu做了md5，结果便有了外挂的基础，呵呵\r\n\r\n<strong>RE christmans：</strong>这个在做果实自动收割的时候还真研究了一下，施肥的标记变量的确是您说的'o'，不过这个只是用来标记某个阶段是否施肥的变量，真正是作用在q这个变量上，这个是作物的种植时间，施肥后会提前这个时间的。不知您要计算化肥来做什么呢？\r\n\r\n<strong>RE kk：</strong>真是不好意思，代理这个忘记加上了，十分抱歉，请稍后，我会在0.6的正式版中把这个加进去的，好吧\r\n\r\n<strong>RE ousin：</strong>不会吧，我这里把连接相关的流程重新写了，结构都进行过优化的，我用了好多天了，还没有出现连接不上的问题呢。是不是您那边的网络状况不太稳定呢？"
  - id: 67
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-04 00:13:26 +0800'
    date_gmt: '2009-04-03 16:13:26 +0800'
    content: "<strong>下面开始回复19-36楼的问题（最近比较忙，回的有点晚，请大家见谅哦）：</strong>\r\n\r\n<strong>RE：19#wicked </strong>第一个问题在目前的版本中已经做了修正，整个登录的流程已经彻底的优化过了，目前应该还算正常，呵呵；第二个问题提的很好，目前程序是自动对哪个种子赚钱做的计算，现在价格也不浮动了，看了这个地方应该弄得智能点咯；第三点嘛，我有点不理解，为什么不攒钱开地呢？况且丢掉的金币和偷来的果实比，还是偷到的果实比较赚钱吧~\r\n\r\n<strong>RE：20#selina</strong> 太好了，熊熊的东东终于起到了抛砖引玉的功能，十分荣幸，您所加入的新功能我会考虑把部分加入到0.6的正式版中的，多谢您的支持~\r\n\r\n<strong>RE：21-22,24-26#delphicoder@126.com</strong> dz home的开心农场有空我会弄一下滴，至于买种子出现乱码的问题，我尽快修正。关于json转码问题，看您用的是php的类包(include class,一般php4)还是用的php的扩展。类包的话应该只能对utf8编码的json数据进行解码，您看到的那个乱码其实是utf8编码格式的，而程序本身编码是gb2312的（因为bat调用显示的时候只能显示gb2312的编码）可以考虑做个转码，另外，据说php对json的encode和decode并不是按照标准做的，可能有时候会有问题。\r\n\r\n<strong>RE：27#tony </strong>这个嘛，我提供一个方法 不知道是否可行。先把flash文件down下来，这个反编译程序做一下发编译，然后看看as(action script flash的脚本语言，类c)里面对这两个变量做了什么，基本上应该是farmtime加上某些字符，然后再做一个md5\r\n\r\n<strong>RE：28-30,34-36#</strong> 多谢大家对熊熊的关注，新程序虽然晚了一些，不过迟到总比不到好，呵呵，希望大家喜欢，并多多交流。\r\n\r\n<strong>RE：31-33# huochai</strong> 是很您自己安装的php冲突了，可以将happyfarm.bat文件中的php.exe路径指定到您的php安装路径"
  - id: 68
    author: wicked
    author_email: wicked7208@163.com
    author_url: ''
    date: '2009-04-04 12:39:08 +0800'
    date_gmt: '2009-04-04 04:39:08 +0800'
    content: 呵呵很久没来了，最近在公司太忙，回家也上不了网，知道熊熊更新了很高兴呵呵，熊熊继续加油啊！
  - id: 69
    author: ousin
    author_email: ousin3412@163.com
    author_url: ''
    date: '2009-04-04 15:46:09 +0800'
    date_gmt: '2009-04-04 07:46:09 +0800'
    content: 代码可以用了，是我自己电脑的问题，今天发现一种&ldquo;青虫&rdquo;，但飞熊的代码貌似无法监测到它的存在啊！
  - id: 70
    author: truman
    author_email: chinathere@126.com
    author_url: 'http://hello'
    date: '2009-04-04 16:49:31 +0800'
    date_gmt: '2009-04-04 08:49:31 +0800'
    content: '小飞熊 : 你好。 对于分析的代码看了，很受启发。 对一些地方不是很明白，能否留个qq，认识交流下？谢谢'
  - id: 71
    author: cjd
    author_email: abc@abc.com
    author_url: ''
    date: '2009-04-05 14:28:22 +0800'
    date_gmt: '2009-04-05 06:28:22 +0800'
    content: |-
      请问小熊，as怎么解析的啊...
      一眼就能看出md5加密吗？
  - id: 72
    author: 朋友的朋友
    author_email: yujinlongsheng@163.com
    author_url: ''
    date: '2009-04-06 12:50:21 +0800'
    date_gmt: '2009-04-06 04:50:21 +0800'
    content: >-
      朋友我对电脑一窍不同，你们说的东东太专业了，这是我的邮箱yujinlongsheng@163.com。那位仁兄能不辞劳苦，给发份我能直接用的，或者我能看明白的，，，，，急。。。。。非常感激！！！！
  - id: 73
    author: 朋友的朋友
    author_email: yujinlongsheng@163.com
    author_url: ''
    date: '2009-04-06 12:51:28 +0800'
    date_gmt: '2009-04-06 04:51:28 +0800'
    content: 对了补充一句，只要能争车位就行，感激之至！！！！！
  - id: 74
    author: selina
    author_email: tiger@jlau.edu.cn
    author_url: ''
    date: '2009-04-06 14:35:16 +0800'
    date_gmt: '2009-04-06 06:35:16 +0800'
    content: >-
      终于有飞熊的回复，我还以为飞熊不欢迎对程序的修改呢。报告一下近况。

      最近抽空把小飞熊的代码用C#重写了一下，提高一下运行效率。又增加了2个新功能。1、多账号操作，因为我有若干小号，大号在程序sleep期间的时间可以交给小号去用了。2、自动为土地施肥。

      php代码也在C++重写的同时改写完成。再次感谢小飞熊，希望能看到小飞熊更多的代码，继续学习。
  - id: 75
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-06 23:04:27 +0800'
    date_gmt: '2009-04-06 15:04:27 +0800'
    content: >-
      <strong>回复楼上</strong>


      <strong>RE：52#wicked</strong> 多谢，一有空熊熊就会把这个继续弄好滴；


      <strong>RE：53#ousin</strong> 呵呵，这个东东熊熊也是刚刚发现，已经知道如何杀掉它了，会在0.6正式版中加入进去的；


      <strong>RE：54#truman</strong> qq在这里 https://lfbear.com/?page_id=227 欢迎交流；


      <strong>RE：55#cjd</strong> as的代码中可以一下子就看出来加密算法的，只要你找准了那段代码 呵呵


      <strong>RE：56-57#</strong> ？？ 恐怕这个还是要您细心阅读后自己搞定，这段程序目的是交流，而不是纯粹的外挂。


      <strong>RE：58# selina</strong> 怎么会不欢迎嘛，共同学习共同提高嘛~
      c#不是很熟，不知道c#是不是能够避免端口滥用问题呢？qq在这里 https://lfbear.com/?page_id=227 欢迎交流；
  - id: 77
    author: Dragon
    author_email: 408088530@qq.com
    author_url: ''
    date: '2009-04-08 12:41:32 +0800'
    date_gmt: '2009-04-08 04:41:32 +0800'
    content: >-
      小熊你好，我想请教一下farmTime的值，你是如何获取的，这个值每次提交都会变的，我知道这个和提交时间有关系，但是还是不知道他的那个值是怎么得来的，麻烦给个思路，谢谢。。。
  - id: 79
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-09 15:02:33 +0800'
    date_gmt: '2009-04-09 07:02:33 +0800'
    content: RE： Dragon farmTime为时间戳，用系统的时间函数即可获取。
  - id: 80
    author: dingchangs
    author_email: dingchangs@163.com
    author_url: ''
    date: '2009-04-09 21:39:16 +0800'
    date_gmt: '2009-04-09 13:39:16 +0800'
    content: |-
      <a href="#comment-74" rel="nofollow">@selina </a>
      C#写外挂不错，有机会可以讨论一下，我是搞C++的，比较喜欢网络编程QQ：309859048
  - id: 81
    author: 独行侠
    author_email: mensha3@hotmail.com
    author_url: ''
    date: '2009-04-12 17:52:10 +0800'
    date_gmt: '2009-04-12 09:52:10 +0800'
    content: |-
      <a href="#comment-74" rel="nofollow">@selina </a>
      我这几天也在试着用C#和C++改写小熊的东西，遇到些问题，有机会能请教一下么，我的QQ：40561614
  - id: 82
    author: yeerdd
    author_email: 228800120@qq.com
    author_url: ''
    date: '2009-04-13 17:30:10 +0800'
    date_gmt: '2009-04-13 09:30:10 +0800'
    content: >-
      我对delphicoder@126.com 关注的问题也比较感兴趣，也是在找UCenter Home 开心农场
      外挂找到这里，认识熊熊的。本人对编程是一窍不通，看到熊熊的代码那叫一个佩服！也希望熊熊的外挂能具有通用性，因为很多基于UCenter
      Home的论坛都添加了这个应用。实例：http://www.hybbs.net/UHome/userapp.php?id=1021978

      可能很多人更喜欢和论坛的朋友一起玩开心农场，比如地方论坛。我不懂编程，对软件比较感兴趣，不知道熊熊的外挂能不能实现在配置文件中配置指定论坛的开心农场登陆，或者直接绕过论坛直接登陆fminutes.com自己的ID（由于不懂，可能考虑问题比较天真，望各位不要见笑）而不是仅仅局限在现在比较多的校内网、开心网、QQ的开心农场外挂。
  - id: 83
    author: xtugwxf
    author_email: xtugwxf@qq.com
    author_url: ''
    date: '2009-04-13 22:32:43 +0800'
    date_gmt: '2009-04-13 14:32:43 +0800'
    content: 请问那个farmtime算md5那儿，那个inu是啥？
  - id: 84
    author: 呵呵
    author_email: x@x163.com
    author_url: 'http://x'
    date: '2009-04-14 12:01:48 +0800'
    date_gmt: '2009-04-14 04:01:48 +0800'
    content: 这几天 开心农场辅助貌似很卡 总会卡到那里动不了
  - id: 85
    author: 郑宇
    author_email: zhengyu.willian@gmail.com
    author_url: ''
    date: '2009-04-14 15:20:45 +0800'
    date_gmt: '2009-04-14 07:20:45 +0800'
    content: >-
      请教一下，那个farmKey和farmTime是怎么得到的，我用MD5加密 farmTime+"inu"
      后返回的与开心农场的实际farmKey不一样，是不是开心农场把加密的算法更新了？还有就是把swf文件反编译为原文件的工具是什么啊？我在网上搜的都不行，我想自己看看那个flash里面写的到底是什么！
  - id: 86
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-15 16:33:56 +0800'
    date_gmt: '2009-04-15 08:33:56 +0800'
    content: >-
      最近工作比较忙，很久没来看看了。

      <a href="#comment-79" rel="nofollow">@小飞熊 </a> ：c#可以进行端口复用和释放端口不会有滥用。

      <a href="#comment-81" rel="nofollow">@独行侠 </a> <a href="#comment-80"
      rel="nofollow">@dingchangs </a>
      我通常是不上QQ的，有什么要讨论的可以发在这里嘛，大家一起讨论，有空的时候我会来转转，顺便支持一下小飞熊。
  - id: 87
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-15 16:36:36 +0800'
    date_gmt: '2009-04-15 08:36:36 +0800'
    content: >-
      <a href="#comment-83" rel="nofollow">@xtugwxf
      </a>：替小飞熊回复你一下，那个inu的作用是，时间戳连接上inu这个字符串然后生成md5码，服务器要验证这个md5码的。
  - id: 88
    author: liuzhiqing
    author_email: liuzhiqing521@126.com
    author_url: ''
    date: '2009-04-15 19:15:29 +0800'
    date_gmt: '2009-04-15 11:15:29 +0800'
    content: >-
      warning:Error parsing D:\Program Files\program\bin//friend.ini on line 47
      in D:\Program Files\program\bin\happyfarm.php on line 68.

      请问如何解决啊！我添加了70个好友，但是只能扫描44个。。。
  - id: 89
    author: delphicoder@126.com
    author_email: delphicoder@126.com
    author_url: ''
    date: '2009-04-15 23:50:28 +0800'
    date_gmt: '2009-04-15 15:50:28 +0800'
    content: >-
      <a href="#comment-74" rel="nofollow">@selina
      </a>c#?不知道有没有成品可以看一下的？可以直接翻译代码为c#?高！
  - id: 90
    author: liuzhiqing521@126.com
    author_email: liuzhiqing521@126.com
    author_url: ''
    date: '2009-04-16 00:55:50 +0800'
    date_gmt: '2009-04-15 16:55:50 +0800'
    content: >-
      求助：

      warning: error parsing D:\Program Files\program\bin\friends.ini on line 47
      in D:\Program Files\program\bin\happyfarm.php on line 68

      我在friends.ini里输入了70个好友，但是就只有44个可以用。请问该怎么办？！~~
  - id: 91
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-17 14:16:57 +0800'
    date_gmt: '2009-04-17 06:16:57 +0800'
    content: >-
      RE:<a href="#comment-90" rel="nofollow">@liuzhiqing521@126.com </a>

      从错误描述上来看 应该是你把happyfarm.php放错了为止 应该放到D:\Program
      Files\program\happyfarm\happyfarm.php这里
  - id: 92
    author: yyy
    author_email: efka@djkl.com
    author_url: ''
    date: '2009-04-17 14:18:21 +0800'
    date_gmt: '2009-04-17 06:18:21 +0800'
    content: 开心农场的加密算法改过了，现在不用inu了，看代码貌似很复杂
  - id: 93
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-17 14:36:32 +0800'
    date_gmt: '2009-04-17 06:36:32 +0800'
    content: "<a href=\"#comment-85\" rel=\"nofollow\">@郑宇 </a>最近没有太多时间来关注开心农场，不清楚加密算法怎么样咯~\r\n\r\n<strong>关于web game的加密问题</strong>，从熊熊的一点点经验来看，一般游戏逻辑不会交给前端处理，这样作弊很容易，前端基本上时对数据做一个低级的编码或者校验。为了防止有人不通过前端直接去调用后端接口来玩游戏，ria基本上用flash或者js来解决这个问题，比如开心农场使用了一个farmtime和farmkey作为阻止的办法，类似的这种限制可以通过反编译flash，阅读as代码或者js代码来搞定。但是如果flash中使用了商业加密控件（熊熊对这个不熟）或者在fla编译的过程做了手脚（无法反编译swf）就不太容易搞定了，所以说目前要想打击web game的外挂程序还是有方法的。不过应了那句老话了：魔高一尺道高一丈，有人加密就会有人来破解的，这样一方面满足了一些人目的，另一方面也促进了技术的升级，很不错的一件事。"
  - id: 94
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-17 16:33:59 +0800'
    date_gmt: '2009-04-17 08:33:59 +0800'
    content: "RE:<a href=\"#comment-92\" rel=\"nofollow\">@yyy </a>\r\n刚刚忙里偷闲看了一下，加密密钥的确有改动，改为动态获取了，不过程序还可以用哦~"
  - id: 95
    author: Riva
    author_email: lizhenhe@foxmail.com
    author_url: 'http://'
    date: '2009-04-17 17:07:26 +0800'
    date_gmt: '2009-04-17 09:07:26 +0800'
    content: '请问,熊熊,下个更新什么时候出来.强烈支持你!'
  - id: 96
    author: longe
    author_email: 645289243@qq.com
    author_url: ''
    date: '2009-04-17 19:41:50 +0800'
    date_gmt: '2009-04-17 11:41:50 +0800'
    content: 批处理时系统找不到路径怎么回事？
  - id: 97
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-17 22:00:19 +0800'
    date_gmt: '2009-04-17 14:00:19 +0800'
    content: |-
      RE：<a href="#comment-95" rel="nofollow">@Riva </a>
      我也想快点更新呢 可是最近公司挺忙的 总是加班呢~
  - id: 98
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-17 22:01:14 +0800'
    date_gmt: '2009-04-17 14:01:14 +0800'
    content: |-
      RE：<a href="#comment-96" rel="nofollow">@longe </a>
      是php程序位置放置有问题，仔细阅读下说明，bin和happyfram目录必须为同一级才可以哦~
  - id: 99
    author: 流窜蜂
    author_email: imsn@sina.com
    author_url: ''
    date: '2009-04-18 13:55:47 +0800'
    date_gmt: '2009-04-18 05:55:47 +0800'
    content: >-
      TO:小飞熊  
      我比较喜欢和论坛的朋友一起玩开心农场，比如地方论坛。对PHP语言不是很懂的我试着修改你的代码，但是总是不得其所。论坛的貌似有个跳转，先转到uc的服务器
      然后再转到开心农场的服务器。总之搞了很久都没搞定。小飞熊有空帮我们看看，接口如何弄，谢谢。
  - id: 100
    author: yyy
    author_email: efka@djkl.com
    author_url: ''
    date: '2009-04-18 14:10:12 +0800'
    date_gmt: '2009-04-18 06:10:12 +0800'
    content: "在happyfarm.as中，有个函数是loadKey，大致是先从http://xnimg.cn/xcube/app/23163/xn36//module/ini.xml?v=inu14获取xml中的security host与port，然后连接这个主机，通过uid获取encodeKey。但是我用程序实现时发现，这个主机根本连接不上，要么是拒绝连接，要么是超时无响应。后来我看到调用loadKey()函数的代码是这样写的：\r\n           <code> if (uId == \"\")\r\n            {\r\n                loadMaterial();\r\n            }\r\n            else\r\n            {\r\n                loadKey();\r\n            }// end else if</code>关于这里的uId，在happyfarm的构造函数中有：\r\n               <code> if (_loc_1.hasOwnProperty(\"v\"))\r\n                {\r\n                    _loc_2 = _loc_1[\"v\"];\r\n                }// end if\r\n                if (_loc_1.hasOwnProperty(\"uId\"))\r\n                {\r\n                    uId = _loc_1[\"uId\"];\r\n                }// end if\r\n                if (_loc_1.hasOwnProperty(\"inuId\"))\r\n                {\r\n                    SessionKey.value = _loc_1[\"inuId\"];\r\n                }// end if</code>这里的_loc_1是this.stage.loaderInfo.parameters，应该就是swf后面的参数。\r\n而校内网的开心农场进入的url是：http://xnimg.cn/xcube/app/23163/xn36//happyfarm.swf?v=inu14，也就是说只有v这个参数，uId为空，所以校内网的开心农场应该没有调用loadKey函数，loadKey应该是给其他平台的开心农场使用的。\r\n在postRequest函数中我发现，farmKey的值是MD5(farmTime+SecurityKey.encodeKey)，而在SecurityKey类中的get encodeKey()中有如下代码：\r\n      <code>  public static function get encodeKey() : String\r\n        {\r\n            var _loc_1:Bitmap;\r\n            var _loc_2:String;\r\n            if (_encodeKey != \"inu\")\r\n            {\r\n                return _encodeKey;\r\n            }// end if\r\n            _loc_1 = new KEYJPG();\r\n            _loc_2 = _loc_1.bitmapData.getPixel32(3, 5).toString(24);\r\n            return _loc_2;\r\n        }// end function</code>这里的_encodeKey被定义为SecurityKey的静态成员变量：\r\npublic static var _encodeKey:String = \"inu\";\r\n也就是说，如果没有调用过set encodeKey，那么encodeKey返回的是一张位图的(3,5)像素的颜色值再转换成24进制数。而set encodeKey只有前面所说的loadKey会去调用，既然loadKey没有被调用，SecurityKey._encodeKey应当始终保持\"inu\"。所以函数返回的encodeKey应该与_loc_1和_loc_2，也就是位图有关。而这张位图又是怎么来的呢？\r\n对于上面代码中的KEYJPG，在SecurityKey类中有如下定义：\r\nprivate static var KEYJPG:Class = SecurityKey_KEYJPG;\r\n这一句我不是很理解，我猜测就是为SecurityKey_KEYJPG这个类起一个别名，叫做KEYJPG。\r\n那么SecurityKey_KEYJPG又是什么呢？\r\n在SecurityKey_KEYJPG.as中，有如下代码：\r\n<code>package hf.security\r\n{\r\n    import mx.core.*;\r\n\r\n    public class SecurityKey_KEYJPG extends BitmapAsset\r\n    {\r\n\r\n        public function SecurityKey_KEYJPG()\r\n        {\r\n            return;\r\n        }// end function\r\n\r\n    }\r\n}</code>也就是说，package hf.security\r\n{\r\n    import mx.core.*;\r\n\r\n    public class SecurityKey_KEYJPG extends BitmapAsset\r\n    {\r\n\r\n        public function SecurityKey_KEYJPG()\r\n        {\r\n            return;\r\n        }// end function\r\n\r\n    }\r\n}\r\n也就是说，SecurityKey_KEYJPG就是继承了而没有实现任何东西。\r\n那么，在前面的\r\n            _loc_1 = new KEYJPG();\r\n中，_loc_1应该是一张空白的位图吧？\r\n分析到这里我就不解了，既然是空白的位图那是怎么执行_loc_2 = _loc_1.bitmapData.getPixel32(3, 5).toString(24);呢？\r\n不知道当中哪里错了，望熊熊指教！"
  - id: 101
    author: yyy
    author_email: efka@djkl.com
    author_url: ''
    date: '2009-04-18 14:10:49 +0800'
    date_gmt: '2009-04-18 06:10:49 +0800'
    content: 这里贴代码缩进都没有了诶
  - id: 102
    author: yyy
    author_email: efka@djkl.com
    author_url: ''
    date: '2009-04-18 14:13:11 +0800'
    date_gmt: '2009-04-18 06:13:11 +0800'
    content: "发现多复制了一段\r\n&ldquo;也就是说，<code>package hf.security\r\n{\r\nimport mx.core.*;\r\n\r\npublic class SecurityKey_KEYJPG extends BitmapAsset\r\n{\r\n\r\npublic function SecurityKey_KEYJPG()\r\n{\r\nreturn;\r\n}// end function\r\n\r\n}\r\n}</code>&rdquo;，抱歉没有仔细检查"
  - id: 103
    author: longe
    author_email: 645289243@qq.com
    author_url: ''
    date: '2009-04-19 12:45:59 +0800'
    date_gmt: '2009-04-19 04:45:59 +0800'
    content: |-
      <a href="#comment-98" rel="nofollow">@小飞熊 </a>
      谢谢小飞熊
  - id: 132
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-20 15:37:03 +0800'
    date_gmt: '2009-04-20 07:37:03 +0800'
    content: >-
      RE：<a href="#comment-100" rel="nofollow">@yyy </a>

      感谢yyy详细的分析，看来这里的确很麻烦。关于连接到服务器获取密钥的问题，看了一下，应该有ip限制一类东东，所以只要不是在指定的服务器上，应该是没办法连接上的。不过目前使用inu作为加密密钥还可以使用，刚刚好赶上最近在忙活搬家的事情，所以熊熊就先偷了个懒儿~过些天来研究下怎么彻底搞定这个问题，哈哈
  - id: 133
    author: strongczq
    author_email: strongczq@gmail.com
    author_url: ''
    date: '2009-04-20 17:36:05 +0800'
    date_gmt: '2009-04-20 09:36:05 +0800'
    content: 请问你们都是用什么东西反编译swf的？还有，大家知道现在对farmkey是怎么加密的吗？
  - id: 134
    author: wangbo
    author_email: bestwangbo@sina.com
    author_url: ''
    date: '2009-04-21 16:20:08 +0800'
    date_gmt: '2009-04-21 08:20:08 +0800'
    content: 官方是不是发动什么数据了？今天一直都不能用了，总是提示&ldquo;用户个人信息获取失败&rdquo;
  - id: 135
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-21 16:34:44 +0800'
    date_gmt: '2009-04-21 08:34:44 +0800'
    content: '的确是不能获取数据了,返回的数据均为空,期待熊熊'
  - id: 136
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-21 17:12:28 +0800'
    date_gmt: '2009-04-21 09:12:28 +0800'
    content: >-
      请教一下小飞熊

      既然farmkey=MD5（farmtime+"inu"）;

      为什么我抓包分析，对farmkey进行MD5解密，却得不到farmtime+"inu"的字符串呢
      这里不解呀。。。。？？？今天开心农场更新了，好像换加密密钥了，软件也就不管用了。。

      今天晚上回去我也反编译一下flash 看看里面到底是啥东东
  - id: 137
    author: long
    author_email: longyu0414@126.com
    author_url: 'http://www.longyu.name'
    date: '2009-04-21 19:45:15 +0800'
    date_gmt: '2009-04-21 11:45:15 +0800'
    content: '今天开始代码不能用了,一直提示获取个人信息失败！是不是上面那个ｙｙｙ说的　那个密钥换了？希望小飞熊给个答案'
  - id: 138
    author: 苏途
    author_email: 190879483@qq.com
    author_url: ''
    date: '2009-04-21 20:10:13 +0800'
    date_gmt: '2009-04-21 12:10:13 +0800'
    content: >-
      http?mod=user&amp;act=run&amp;farmKey=b3448c9a4aeb038e4a917e53a4d45665&amp;farmTime=1240315774&amp;inuId=

      新的地址加了"&amp;inuId=&rdquo;，我把这个加上了也得不到返回。

      可能是验证farmkey了吧。
  - id: 139
    author: strongczq
    author_email: strongczq@gmail.com
    author_url: ''
    date: '2009-04-21 20:16:44 +0800'
    date_gmt: '2009-04-21 12:16:44 +0800'
    content: |-
      farmTime+inu的密钥已经不能用了！
      但是我现在有个临时的办法，过期的farmKey和farmTime其实还是可以用，呵呵，所以...
      function geturl($mod,$act)里面：
      把
      $timestamp = mktime();
      $farmkey = md5($timestamp.$keygen);
      改为：
      $timestamp='1240227947';
      $farmkey='ff14bbdc7307e32b670b82b492c70447';
      就OK了。
      这两个参数是我自己抓包得到的，你们也可以自己去抓，用自己的参数。
  - id: 140
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-21 21:11:15 +0800'
    date_gmt: '2009-04-21 13:11:15 +0800'
    content: 加密不用inu了，不能用了。和yyy一样，卡在了加密那里，对as没什么了解，没搞清楚是怎么加密的。
  - id: 141
    author: huochai
    author_email: bupthuochai@gmail.com
    author_url: ''
    date: '2009-04-22 06:18:45 +0800'
    date_gmt: '2009-04-21 22:18:45 +0800'
    content: 看来农场又更新了，呵呵
  - id: 142
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-22 10:09:36 +0800'
    date_gmt: '2009-04-22 02:09:36 +0800'
    content: >-
      原来的加密密钥不能用了，看样子现在使用的是动态获取的密钥咯~ 大家可以先开动脑筋，看看有什么好的办法没，<a href="#comment-139"
      rel="nofollow">@strongczq </a>
      作为临时解决方案是没问题的，但是需要自己经常去抓framkey过来，熊熊会在周末有空的时候来研究下，大家也一起努力吧~
  - id: 143
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-22 10:20:48 +0800'
    date_gmt: '2009-04-22 02:20:48 +0800'
    content: 我也是采用了同样的办法
  - id: 144
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-22 10:21:59 +0800'
    date_gmt: '2009-04-22 02:21:59 +0800'
    content: 可能是服务器只是验证密钥 但是没有验证时间 如果是那样的话就没有必要动态获取了，抓个包然后改成动态的就OK了
  - id: 145
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-22 10:45:43 +0800'
    date_gmt: '2009-04-22 02:45:43 +0800'
    content: >-
      <a href="#comment-142" rel="nofollow">@小飞熊 </a>
      恐怕很困难，如果官方将bitmap类进行了重写，恐怕难度更高。貌似tostring函数也重构了，研究了一天，没找到好的办法解决，继续研究中，不过工作比较忙时间有限，希望高手能有好的解决办法。也期待小飞熊的解决方案。
  - id: 146
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-22 10:52:01 +0800'
    date_gmt: '2009-04-22 02:52:01 +0800'
    content: >-
      感谢一下 <a href="#comment-140" rel="nofollow">@selina </a>
      顺便说一下，过期的framkey应该是有时限的，所以得经常抓经常换才行。


      <a href="#comment-142" rel="nofollow">@小飞熊 </a>

      给小飞熊的一个提醒，获取数据的时候应该加上超时判断，最近农场很不稳定，程序经常卡在读取某个好友的信息那不动。我将urlcheat函数加了一个参数$yc，用于进行超时判断。curl_setopt($curl,
      CURLOPT_TIMEOUT, $yc);//设置超时时间（秒）。不知道是否还有更好的解决办法。
  - id: 147
    author: huochai
    author_email: bupthuochai@gmail.com
    author_url: ''
    date: '2009-04-22 14:17:35 +0800'
    date_gmt: '2009-04-22 06:17:35 +0800'
    content: 现在 farmkey 变了，是从那个swf中取这张图片的某个坐标的RGB值的24进制输出，好像是这么回事吧，还没搞清楚
  - id: 148
    author: strongczq
    author_email: strongczq@gmail.com
    author_url: ''
    date: '2009-04-22 16:25:22 +0800'
    date_gmt: '2009-04-22 08:25:22 +0800'
    content: |-
      <a href="#comment-142" rel="nofollow">@小飞熊 </a>
      farmkey不用改的，一次抓包，就一直都可以用了，只要farmtime也都不改就OK了
  - id: 149
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-22 17:38:07 +0800'
    date_gmt: '2009-04-22 09:38:07 +0800'
    content: 同意楼上的 我从昨天晚上改了以后就一直没有出问题
  - id: 150
    author: kmitnick
    author_email: 12121@1212.com
    author_url: ''
    date: '2009-04-22 18:37:59 +0800'
    date_gmt: '2009-04-22 10:37:59 +0800'
    content: 这个farmtime还是会改变滴
  - id: 151
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-22 19:50:27 +0800'
    date_gmt: '2009-04-22 11:50:27 +0800'
    content: 难道只有我的会过期？我抓一次之后过段时间就不能用了，也许是网络状况不好吧。
  - id: 152
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-23 09:25:35 +0800'
    date_gmt: '2009-04-23 01:25:35 +0800'
    content: '昨晚睡觉前开着md5crack 估计跑了4,5个小时,终于爆破了,加密的部分是7位的24进制数,大家可以是一下,这个密钥在一段时间内应该不会变了吧'
  - id: 153
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-23 09:32:08 +0800'
    date_gmt: '2009-04-23 01:32:08 +0800'
    content: '爆破是个比较笨的办法,不过晚上睡觉了就让它跑着,我也不知道是不是每个人的密钥是一样的,所以大家自己试试吧,也很快.还是期待熊熊大哥给出完美的解决办法'
  - id: 154
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-23 09:38:41 +0800'
    date_gmt: '2009-04-23 01:38:41 +0800'
    content: '爆破比较笨,不过正好晚上睡觉了,就试试.我不知道大家的密钥是不是一样的,所以大家还是自己跑跑看.还是期待熊熊大哥给出完美的解决方法,'
  - id: 155
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-23 09:44:01 +0800'
    date_gmt: '2009-04-23 01:44:01 +0800'
    content: |-
      <a href="#comment-153" rel="nofollow">@shuiyiliu </a>
      你的密码是多少啊，贴出来参考一下。
  - id: 156
    author: cyb
    author_email: watercyb@hotmail.com
    author_url: ''
    date: '2009-04-23 10:20:58 +0800'
    date_gmt: '2009-04-23 02:20:58 +0800'
    content: |-
      我也卡在这里了_loc_2 = _loc_1.bitmapData.getPixel32(3, 5).toString(24);
      不过我不懂AS 我用flash式了一下没有赋值的话就显示出错~~~~
  - id: 157
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-23 10:36:53 +0800'
    date_gmt: '2009-04-23 02:36:53 +0800'
    content: m9fmcbi
  - id: 158
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-23 10:44:10 +0800'
    date_gmt: '2009-04-23 02:44:10 +0800'
    content: 'm9fmcbi,好象我在这发的评论都不能及时显示....'
  - id: 159
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-23 10:55:44 +0800'
    date_gmt: '2009-04-23 02:55:44 +0800'
    content: >-
      RE:<a href="#comment-157" rel="nofollow">@shuiyiliu </a>

      十分感谢shuiyiliu的辛勤劳动，辛苦啦。因为熊熊租的服务器不是很好，所以做了一层页面cache，防止网站挂掉，嘿嘿。不过我刚刚把cache的时间调短咯。
  - id: 160
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-23 11:07:14 +0800'
    date_gmt: '2009-04-23 03:07:14 +0800'
    content: >-
      RE：<a href="#comment-144" rel="nofollow">@zxjzxj521 </a>
      目前服务器的确没有对时间做严格验证，但是做这个限制是很容易的，所以这个方法只能是临时的。获取加密密钥才是真正解决问题的办法。
  - id: 161
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-23 11:09:14 +0800'
    date_gmt: '2009-04-23 03:09:14 +0800'
    content: RE：selina 呵呵，大家一起研究。最近的确有发现这种超时卡死情况，我会尽快在持久模式中加入超时限制的，否则的确很不爽，嘿嘿
  - id: 162
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-23 11:11:05 +0800'
    date_gmt: '2009-04-23 03:11:05 +0800'
    content: |-
      <a href="#comment-158" rel="nofollow">@shuiyiliu </a>
      m9fmcbi 这个密钥看来是通用的，我的也是这个。不过密钥要变起来也是很容易的，说不定什么时候就变了，期待小飞熊的完美方案。
  - id: 163
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-23 11:20:28 +0800'
    date_gmt: '2009-04-23 03:20:28 +0800'
    content: "selina\r\n的确是这个问题,同期待"
  - id: 164
    author: kmitnick
    author_email: 12121@1212.com
    author_url: ''
    date: '2009-04-23 11:42:12 +0800'
    date_gmt: '2009-04-23 03:42:12 +0800'
    content: >-
      恩，关注一下，这个估计没有什么通用的方法来实现的，程序中原值的选定是以那些人的意志为转移的，也就只好每次去找到加密的原值。但他们只是用md5散列来模糊两个参数间的关系，所以破解难度不是很高。
  - id: 165
    author: xiaohf
    author_email: xiaohf702@hotmail.com
    author_url: ''
    date: '2009-04-23 14:39:39 +0800'
    date_gmt: '2009-04-23 06:39:39 +0800'
    content: 哈哈，m9fmcbi确实好用
  - id: 167
    author: yyy
    author_email: efka@djkl.com
    author_url: ''
    date: '2009-04-23 21:34:03 +0800'
    date_gmt: '2009-04-23 13:34:03 +0800'
    content: >-
      终于搞清楚了。在happyfarm.swf里面有一张图片，反编译就能找到，这张图片的(3,5)这点的颜色值，搞成0xFFrrggbb的格式，其中rr、gg、bb分别是这点的三色值，然后把这个数转成24进制，就是encodeKey
  - id: 168
    author: yyy
    author_email: efka@djkl.com
    author_url: ''
    date: '2009-04-23 21:35:29 +0800'
    date_gmt: '2009-04-23 13:35:29 +0800'
    content: 说到底现在校内的开心农场的加密密钥还是静态的
  - id: 169
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-23 23:16:40 +0800'
    date_gmt: '2009-04-23 15:16:40 +0800'
    content: "@yyy\r\n谢谢,难怪那张图片看起来那么怪异...."
  - id: 170
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-24 10:14:27 +0800'
    date_gmt: '2009-04-24 02:14:27 +0800'
    content: >-
      <a href="#comment-167" rel="nofollow">@yyy </a>
      我以前试过取那张图片的3，5点颜色的值，取出来转成24进制为m9fmcbj，而真正的密钥为m9fmcbi  差了一个数。
  - id: 171
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-24 10:23:39 +0800'
    date_gmt: '2009-04-24 02:23:39 +0800'
    content: >-
      <a href="#comment-167" rel="nofollow">@yyy </a> 那个点十进制颜色值为 R：46 G：78  B：27
      不透明度为255，转换成16进制之后为0xFF2E301B；如果是0xFF2E301A再转成24进制就和真正的密钥对上了。也就是说B的数值应该为26而不是27。难道是我的ps有问题？不知道你取出来的点的颜色是否是这样。
  - id: 172
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-24 10:26:52 +0800'
    date_gmt: '2009-04-24 02:26:52 +0800'
    content: >-
      <a href="#comment-171" rel="nofollow">@selina </a>
      上面笔误写错了，更正一下：&ldquo;那个点十进制颜色值为 R：46 G：78 B：27 &rdquo;
  - id: 173
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-24 13:00:51 +0800'
    date_gmt: '2009-04-24 05:00:51 +0800'
    content: 晕怎么还是错？更正一下：&ldquo;那个点十进制颜色值为 R：46 G：48 B：27 &rdquo;
  - id: 174
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-24 13:42:20 +0800'
    date_gmt: '2009-04-24 05:42:20 +0800'
    content: 感谢shuiyiliu  我也试一下。
  - id: 175
    author: ssz
    author_email: a@ddd.dd
    author_url: ''
    date: '2009-04-24 16:16:22 +0800'
    date_gmt: '2009-04-24 08:16:22 +0800'
    content: >-
      希望以后能多多交流，今天学到不少，今天找到0xff2e301a后，就不知道怎么办了，java不是很懂，反编译的看的不太明白，今天知道了tostring（24）是转化为24进制，谢谢了
  - id: 176
    author: KUKU
    author_email: kuku@sina.com
    author_url: ''
    date: '2009-04-24 16:27:53 +0800'
    date_gmt: '2009-04-24 08:27:53 +0800'
    content: |-
      <a href="#comment-172" rel="nofollow">@selina </a>
      你能不能把获取好友列表的代码共享一下啊
  - id: 177
    author: yyy
    author_email: efka@djkl.com
    author_url: ''
    date: '2009-04-24 16:44:12 +0800'
    date_gmt: '2009-04-24 08:44:12 +0800'
    content: |-
      <a href="#comment-173" rel="nofollow">@selina </a>
      我使用画图打开的，然后用屏幕颜色拾取器取的颜色，是(46,48,26)
      然后我又用ps试了一下，颜色却是(46,48,27)
      不知道是为什么
  - id: 178
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-24 17:43:06 +0800'
    date_gmt: '2009-04-24 09:43:06 +0800'
    content: |-
      今天校内又更新了什么数据呀 杀虫 除草 怎么都返回以下数据呢
      {"errorType":"session","errorContent":"\u8bf7\u91cd\u65b0\u767b\u5f55"}
      我抓包分析了一下数据 发现提交的数据没有什么区别呀？好奇怪呢
  - id: 179
    author: 苏途
    author_email: 190879483@qq.com
    author_url: ''
    date: '2009-04-24 18:48:03 +0800'
    date_gmt: '2009-04-24 10:48:03 +0800'
    content: 为啥要重新登陆呢？  session有问题？
  - id: 180
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-24 19:48:04 +0800'
    date_gmt: '2009-04-24 11:48:04 +0800'
    content: |-
      @zxjzxj521
      @苏途
      注意时间,就是farmtime,正常的时间是比自己本地时间晚8个小时!!!在程序中要减去8个小时,看来在服务器端开始验证时间了
  - id: 181
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-24 19:56:42 +0800'
    date_gmt: '2009-04-24 11:56:42 +0800'
    content: ":zxjzxj521\r\n:苏途\r\n注意时间,正常的时间比构造的数据包的时间晚8个小时...."
  - id: 182
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-24 20:30:58 +0800'
    date_gmt: '2009-04-24 12:30:58 +0800'
    content: |-
      <a href="#comment-180" rel="nofollow">@shuiyiliu </a>
      减去8个小时就可以了？？服务器太阴了
  - id: 183
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-24 20:52:57 +0800'
    date_gmt: '2009-04-24 12:52:57 +0800'
    content: >-
      <a href="#comment-180" rel="nofollow">@shuiyiliu </a>

      首先谢谢shuiyiliu，

      你看是这样吗？首先产生系统时间farmtime  

      然后farmtime=farmtime-8*3600；

      然后farmkey=md5(farmtime+"m9fmcbi");

      shuiyiliu是这个意思吗？我试验了好像还是不管用 可以获得农场的状态，但是杀虫、除草、浇水还是返回如下错误信息

      {&rdquo;errorType&rdquo;:&rdquo;session&rdquo;,&rdquo;errorContent&rdquo;:&rdquo;\u8bf7\u91cd\u65b0\u767b\u5f55&Prime;}

      农场状态怎么就能获得到呢？
  - id: 184
    author: zxjzxj521
    author_email: zxjzxj521@163.com
    author_url: ''
    date: '2009-04-24 21:00:31 +0800'
    date_gmt: '2009-04-24 13:00:31 +0800'
    content: >-
      首先谢谢shuiyiliu 

      你看看下列做法对不对

      首先获得本地时间farmtime 然后farmtime=farmtime-8*3600；

      然后 farmkey=md5(farmtime+&ldquo;m9fmcbi&rdquo;);

      我试验了一下  还是不管用呢，可以获得农场的状态但是除草、浇水、杀虫都返回错误信息

      {&rdquo;errorType&rdquo;:&rdquo;session&rdquo;,&rdquo;errorContent&rdquo;:&rdquo;\u8bf7\u91cd\u65b0\u767b\u5f55&Prime;}

      那为什么可以获得农场的状态呢，，不解呀。。。
  - id: 185
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-24 21:04:07 +0800'
    date_gmt: '2009-04-24 13:04:07 +0800'
    content: >-
      <a href="#comment-181" rel="nofollow">@shuiyiliu </a>

      在 PHP4 中使用 date mktime等函数的时候，并不需要考虑时区问题，会自动获得本地时间，但 PHP5
      中则不行，如果没有设置好时区，程序时间会比服务器时间晚8个小时，同样的代码在不同的系统也可能会产生莫名其妙的问题（比如 Windows 和 Unix
      之间）。想要正常使用时间函数，需要在 php.ini 中设置统一的时区：

      date.timezone = PRC

      其中，PRC 代表中华人民共和国

      或者像小飞熊一样在程序中使用date_default_timezone_set('PRC');//时区设置 这样的语句。

      这8个小时就是北京时间与格林威治时间的差距。
  - id: 186
    author: selina
    author_email: jlauinfo@sina.com
    author_url: ''
    date: '2009-04-24 21:11:33 +0800'
    date_gmt: '2009-04-24 13:11:33 +0800'
    content: >-
      <a href="#comment-177" rel="nofollow">@yyy </a>

      真是这样，原来画图取出来的就是(46,48,26)，ps取出来的就是(46,48,27)。气死我了，要是我早用画图不用ps取色，早就搞定密钥了。最初就是用ps取出的(46,48,27)转成24进制数实验了一下密钥发现不对，ps害死人啊，有没有ps达人解释一下为什么会出现这种情况。
  - id: 187
    author: 苏途
    author_email: 190879483@qq.com
    author_url: ''
    date: '2009-04-24 21:47:37 +0800'
    date_gmt: '2009-04-24 13:47:37 +0800'
    content: |-
      <a href="#comment-184" rel="nofollow">@zxjzxj521 </a>
      先感谢shuiyiliu和selina
      不能用的问题，可以把php中的
      date_default_timezone_set('PRC');//设置时区
      去掉，加//注释掉，这样就成了默认的格林威治时间，正好是8个小时了。
      改过后能用，至于能不能造成其他问题还在观察中，反正现在是能偷了。
  - id: 188
    author: shuiyiliu
    author_email: shuiyiliu@gmail.com
    author_url: ''
    date: '2009-04-24 22:07:37 +0800'
    date_gmt: '2009-04-24 14:07:37 +0800'
    content: |-
      <a href="#comment-184" rel="nofollow">@zxjzxj521 </a>
      <a href="#comment-187" rel="nofollow">@苏途 </a>
      我现在是正常的，能偷，能除草，能浇水，能除虫；
      下午那会校内开心农场似乎特别卡，现在好点了，偷了不少东西。。。
  - id: 189
    author: Smile
    author_email: 66414161@qq.com
    author_url: ''
    date: '2009-04-24 22:12:15 +0800'
    date_gmt: '2009-04-24 14:12:15 +0800'
    content: |-
      今天昨天QQ农场也更新了加密方式！
      farmkey=md5(farmtime+&ldquo;m9fmcbi&rdquo;);
      组合出来的密钥不对。
      官方抓取的数据
      farmTime：1240577881
      farmKey：91481befce76d6f3de146ac137eb72bb
  - id: 190
    author: misterliwei
    author_email: misterliwei@sina.com
    author_url: ''
    date: '2009-04-25 01:44:41 +0800'
    date_gmt: '2009-04-24 17:44:41 +0800'
    content: >-
      注意本机时间和服务器时间的差别。如果比服务器时间太快，也会出现{&rdquo;errorType&rdquo;:&rdquo;session&rdquo;,&rdquo;errorContent&rdquo;:&rdquo;\u8bf7\u91cd\u65b0\u767b\u5f55&Prime;}错误的。至少我机器时间比服务器快了4分左右，就报这个错误了。
  - id: 191
    author: zhaoys
    author_email: zhaoyousheng9999@163.com
    author_url: ''
    date: '2009-04-25 01:56:57 +0800'
    date_gmt: '2009-04-24 17:56:57 +0800'
    content: 你好，开心农场的加密方法改了&hellip;&hellip;你上次那个加密算法是从swf文件里得到的吗？
  - id: 192
    author: huochai
    author_email: bupthuochai@gmail.com
    author_url: ''
    date: '2009-04-25 07:28:30 +0800'
    date_gmt: '2009-04-24 23:28:30 +0800'
    content: 现在 这个 farmkey和timestamp 是动态获取了！ 得想办法怎么才能动态获取呢
  - id: 193
    author: misterliwei
    author_email: MISTERLIWEI@SINA.COM
    author_url: ''
    date: '2009-04-25 09:19:33 +0800'
    date_gmt: '2009-04-25 01:19:33 +0800'
    content: >-
      本机时间和服务器时间不能差太大，否则也会报{&rdquo;errorType&rdquo;:&rdquo;session&rdquo;,&rdquo;errorContent&rdquo;:&rdquo;\u8bf7\u91cd\u65b0\u767b\u5f55&Prime;}，至少我的机器就是比服务器快4分左右，在调整前一直报这个错误。
  - id: 194
    author: misterliwei
    author_email: MISTERLIWEI@SINA.COM
    author_url: ''
    date: '2009-04-25 09:21:40 +0800'
    date_gmt: '2009-04-25 01:21:40 +0800'
    content: 我们刚登录时返回服务器时间时记下本机时间，在发送数据包时将登录服务器时间+当前时间与登录时间的差就可以了。
  - id: 195
    author: Smile
    author_email: 66414161@qq.com
    author_url: ''
    date: '2009-04-25 10:54:29 +0800'
    date_gmt: '2009-04-25 02:54:29 +0800'
    content: |-
      <a href="#comment-192" rel="nofollow">@huochai </a>
      校内的也改成动态获取？
  - id: 196
    author: 流窜蜂
    author_email: imsn@sina.com
    author_url: ''
    date: '2009-04-25 11:47:53 +0800'
    date_gmt: '2009-04-25 03:47:53 +0800'
    content: '经过自己的学习，已经把程序成功改到地方论坛UCHOME上使用，效果很好，谢谢小飞熊啦：）, 对于好友列表我用VB编程搞定，但是比较繁琐。'
  - id: 197
    author: learner
    author_email: testqwe@163.com
    author_url: ''
    date: '2009-04-25 11:53:45 +0800'
    date_gmt: '2009-04-25 03:53:45 +0800'
    content: |-
      可不可以这样，
      得到webBrowser的flash对象， 调用该falsh的 get encodeKey？

      有没有方法
      得到webBrowser的flash对象
  - id: 198
    author: 苏途
    author_email: 5159539@163.com
    author_url: ''
    date: '2009-04-25 15:32:17 +0800'
    date_gmt: '2009-04-25 07:32:17 +0800'
    content: >-
      前面说过，把设置时区的去掉就可以和服务器8小时的限制同步了，但这样有个缺点就是程序上显示的时间是错位的，差了8小时，这个看起来总有些别扭，zxjzxj521说他的方法不可行，我没试过，因为现在用电脑不方便，所以谁能说个合适的解决方案呢？
  - id: 199
    author: 流窜蜂
    author_email: imsn@sina.com
    author_url: ''
    date: '2009-04-25 16:17:52 +0800'
    date_gmt: '2009-04-25 08:17:52 +0800'
    content: 小飞熊，程序里面能不能加上【当日经验满300后不再帮好友干农活】的判断啊
  - id: 200
    author: missyou
    author_email: 496976743@qq.com
    author_url: ''
    date: '2009-04-25 18:07:05 +0800'
    date_gmt: '2009-04-25 10:07:05 +0800'
    content: |-
      ------------------------------
       | 欢迎使用开心农场辅助器 0.6 |
       ------------------------------
       | ->  请选择要操作的模式  <- |
       |  1.普通   2.持久   0.退出  |
       ------------------------------
       请选择:2

       开始照顾您的农场(持久模式) ...
       提醒:持久模式不会自动退出,如想退出程序请直接关闭该窗口!
      [程序提示] 18:06:15 重新启动...
      [程序出错] 用户个人信息获取失败，请稍后再试！

      请问为什么会这样吖？ 已经几天了.  麻烦告诉我一下.
       请选择:
  - id: 203
    author: xtugwxf
    author_email: xtugwxf@qq.com
    author_url: ''
    date: '2009-04-26 17:06:39 +0800'
    date_gmt: '2009-04-26 09:06:39 +0800'
    content: 赞！从这篇文里学了很多东西呀，呵呵
  - id: 205
    author: 流窜蜂
    author_email: imsn@sina.com
    author_url: ''
    date: '2009-04-27 10:15:10 +0800'
    date_gmt: '2009-04-27 02:15:10 +0800'
    content: 程序循环有些问题吧，老是不能准时的收割自己的果子，也不能准时的偷人家的果子。不知道是哪里的问题。
  - id: 206
    author: 小飞熊
    author_email: fbbear@sina.com
    author_url: 'https://lfbear.com'
    date: '2009-04-27 11:20:32 +0800'
    date_gmt: '2009-04-27 03:20:32 +0800'
    content: >-
      <strong>由于开心农场发布了打击外挂的公告，本文评论暂时到此为止。出于尊重开发者的角度，用于学习交流的程序将不会通过这里进行发布。对php或web
      game感兴趣的同学可以加入QQ群6615533（加入请注明来由或blog评论中的用户名，仅为求得可用外挂程序者免入），继续学习讨论，外挂程序将不会继续更新和发布（目前版本的程序已经无法使用），请大家谅解！</strong>
abbrlink: 868
---
<p>继2段罪恶的代码后，这次是校内最近比较热门的游戏，开心农场。依旧先说在前面：本段代码仅供学习研究使用，请不要部署到服务器端供浏览器用户非法使用，否则后果自负！请尊重游戏开发人员的辛勤劳动！</p>
<p><span style="color: #ff0000;">[2009-04-27]开心农场发布紧急通知，打击使用外挂的玩家。本次学习研究并非为了发布可用的外挂程序来取悦玩家，但程序的确实现的&ldquo;外挂&rdquo;的功能。为了防止本文引起不必要的法律纠纷，现关闭本文的评论功能，停止更新程序（目前程序已不可使用），望大家谅解。非针对&ldquo;开心农场&rdquo;游戏的学习与交流还会继续，请注意文末的交流方式。</span></p>
<p><!--more--></p>
<p>[caption id="attachment_278" align="aligncenter" width="663" caption="程序运行截图"]<a href="/assets/images/2009/03/happyfarm-demo.gif"><img class="size-full wp-image-278" title="happyfarm-demo" src="/assets/images/2009/03/happyfarm-demo.gif" alt="程序运行截图" width="663" height="591" /></a>[/caption]</p>
<p>除不可以自动卖掉仓库里的果实以外(自己卖掉果实才有成就感嘛)，其他功能全部支持。这次先讲怎么使用，给大家一个感性上的认识，然后才有兴趣和动力去深入理性学习和研究嘛~</p>
<p>使用前请先下载<a title="php运行库" href="/assets/images/php_run_lib.rar" target="_blank"><span style="color: #0000cc;">php运行库</span></a>，然后下载程序代码：happyfarm&nbsp;[目前停止下载] <span style="color: #008000;">(版本:v0.6 alpha&nbsp;| update:2009-04-02 | md5: 812a81ef79d61befc026316583e77758 | 更新内容:结合开心农场改版，将几个url做了变更，并将整个流程做了优化) </span>将程序解压后放置于php运行库的program目录下，使得happyfarm目录与bin目录同级 ，然后配置参数文件，和抢车位的一样， myinfo.ini 和 friend.ini 中(配置文件中附有注释，记得用写字板别用记事本，否则会出乱码，熊熊用的是editplus 很方便很大众的编辑器) 配置好以后，就可以使用啦！</p>
<p>貌似说的简单哦~ 其实很多人可能会卡到配置文件这一关，呵呵，别心急，让熊熊来教大家，下面是知识时间哦~</p>
<p>配置参数文件myinfo.ini 中除去 ownerid(开心农场id) 其他大家应该很快就完成了，开心农场id 这个怎么弄呢，首先登录校内，打开开心农场的页面，然后点击右键，选择查看源文件。这里是校内开心农场首页的源代码，然后搜索&ldquo; a23163_app.xn_data= &rdquo;你会发现xn_user:后面跟着一串数字，这就是你的ownerid(开心农场id)&nbsp;，先不要太心急，大家知道这段代码是什么吗，这就是传说中的js，有兴趣的同学可以看一下，这段js中的数据会在开心农场的flash里面用得到哦，呵呵，第一阶段ok了，可以把自己的id放到配置文件中，用 happyfarm.bat 来运行外挂了(ps:这段bat其他没什么神奇的 就是用php库来运行php脚本，而bin文件夹下放的就是php库，请务必保持happyfarm这个文件夹与bin文件夹同级哦，否则就调不到php库文件了)</p>
<p>下面要做的是配置好友信息，否则怎么去偷好友的东西呀。首先你需要下载一个firefox，哦？ 你还没有这个，那怎么当web程序员呀，这个可是web程序员必不可少的浏览器哦，然后安装firebug插件。这个如果没安装过可以网上搜一下，很简单的。同样用firefox打开校内，登录，来到开心农场页，打开firebug，开始抓包(对抓包感兴趣的同学可以学习一下网络基础教程)，不绕弯子了，点开好友侧边栏，这时最好先清除一下firebug里面的记录，然后随便点一个好友的头像，会发现有一个post到<a href="http://happyfarm.fivminutes.com/api.php?mod=user&amp;act=run&amp;flag=1&amp;new=1&amp;farmKey">http://*/api.php?mod=user&amp;act=run&amp;flag=1&amp;new=1&amp;farmKey=</a>..... 这个url 的包发出去了，这是点击post的数据 会有 ownerId=xxxxxx 这个xxxxxx就是刚刚点击那个好友的uid咯，把这个好友的信息配到friend.ini 中吧，xxxx = 好友名字 就可以了 多条换行。有人会问了，怎么不自动抓取自己的uid和好友的uid呢，其实做到这个也不难，但是那样还有学习的乐趣和意义了嘛？记住，我们是在学习知识哦~</p>
<p>配置好了，喜欢程序的人就可以用编辑器(不是记事本哦) 打开happyfarm.php 看到&ldquo;游戏参数配置 Configuration I&rdquo;了吗，可以修改这里，让程序更加个性化为你服务哦~ 然后慢慢的，有c语言基础的同学们可以试着改改代码哦~ 熊熊的代码写的不好，请见谅哦(都是上班时候偷偷写的，只顾速度了) 总之呢，了解的越多，就能从这个小程序里面挖掘更多的知识，为己所用。</p>
<p>好了，先到这里吧，有问题的同学多多与我交流哦，希望听到大家的批评指正！</p>
